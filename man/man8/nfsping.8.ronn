nfsping(8) -- send RPC NULL requests to NFS servers
===================================================

## SYNOPSIS

`nfsping` [`-aAdDhlLmMnNqTv`] [`-c` <count>] [`-C` <count>] [`-g` <prefix>] [`-i` <interval>] [`-o` <format>] [`-p` <pause>] [`-P` <port>] [`-r` <reconnect>] [`-S` <source>] [`-t` <timeout>] [`-V` <version>] <servers...>

## DESCRIPTION

`nfsping` sends RPC NULL requests to an NFS server to determine if it is responding and to measure the response time. It supports the network file system (NFS), mount, network lock manager (NLM) and NFS ACL RPC protocols. The default protocol is NFS version 3 over UDP port 2049. Without any arguments it will send a single NULL request to the server and report whether it is alive or dead based on whether it receives a response or not.

## OPTIONS

* `-a`:
  Send NFS ACL protocol NULL requests. Uses UDP port 2049 by default, use the portmapper with `-M`.

* `-A`:
  Display IP addresses (instead of hostnames).

* `-c` <count>:
  Count of ping requests to send to target(s) before exiting. Print a line of output after each response is received (unless the `-q` option is specified). A summary of all responses is printed when the count is reached or the program is interrupted.

* `-C` <count>:
  Count of ping requests to send to target(s), outputs `fping(8)` compatible parseable summary when the count is reached or the program is interrupted.

* `-d`:
  Perform reverse DNS lookups for target(s).

* `-D`:
  Print timestamp (Unix time) before each line of output.

* `-g` <prefix>:
  Specify string prefix for Graphite metric names. Default = "nfsping".

* `-h`:
  Display a help message and exit.

* `-i` <interval>:
  The interval (delay) between targets, in milliseconds. Default = 25.

* `-l`:
  Loop forever. Like traditional ICMP `ping(8)`. Exit loop with Ctrl-c.

* `-L`:
  Send network lock manager (NLM) protocol NULL requests. Implies `-M`.

* `-m`:
  Use multiple target IP addresses if found. For servers with multiple DNS A records (round-robin).

* `-M`:
  Use the RPC portmapper to discover the listening port for the protocol on the server. Default no for NFS and NFS ACL, yes for mount and NLM. Uses UDP by default or TCP if the `-T` option is specified.

* `-n`:
  Send mount protocol NULL requests. Implies `-M`.

* `-N`:
  Send portmap protocol NULL requests.

* `-o` <format>:
  Specify output format for input to another program. Currently supported are [`G`]raphite and [`S`]tatsd.

* `-p` <pause>:
  Number of milliseconds to pause between requests to target. Default = 1000 (one second).

* `-P` <port>:
  The port on the server. Default = 2049 for NFS and NFS ACL, 111 for portmap. The portmapper on the server is queried for other protocols.

* `-q`:
  Quiet. Only print a summary.

* `-r` <reconnect>:
  Disconnect and reconnect to the server after the specified number of requests.

* `-S` <source>:
  Use the specified source IP address for request packets.

* `-t` <timeout>:
  Timeout in milliseconds to wait for a response from the server. Default = 2500.

* `-T`:
  Use TCP to connect to server. Default = UDP.

* `-v`:
  Display debug output on `stderr`.

* `-V` <version>:
  Use protocol `version`. Default = 3 for NFS, can use versions 2/3/4. Other protocols use the corresponding NFS version (except the portmapper which always uses version 2 of the portmap protocol). An error is returned for illegal or unsupported versions of the specified protocol.

## RETURN VALUES

`nfsping` will return `0` if all requests to all targets received responses. Nonzero exit codes indicate a failure. `1` is an RPC error, `2` is a name resolution failure, `3` is an initialisation failure (typically bad arguments).

## HISTORY

This program was inspired by `fping(8)` but doesn't share any code with it.

## AUTHOR

Matt Provost, mprovost@termcap.net

## COPYRIGHT

Copyright 2014 Matt Provost  
RPC files Copyright Sun Microsystems  
NFSv4 files Copyright IETF  
